<div class="container">
  <div class="row">
    <div class="welcome-text">
      Welcome {{ dataManager_name }} from {{ selectedCenter_name }}
    </div>
  </div>

  <div class="row">
    <div class="patient-card" *ngIf="ehrpatient">
      <div class="col-12 col-md-6 patient-name">
        {{ getGivenName(ehrpatient) }}
        {{ ehrpatient.name[0]?.family }}
      </div>

      <div class="col-12 col-md-6 patient-crid">
        <div *ngIf="crid$ | async">
          <div *ngIf="crid; else other_content">
            <span class="research-id-text">CIBMTR Research ID (CRID) : </span>
            <span>{{ crid }}</span>
          </div>
          <ng-template #other_content>
            <button
              type="button"
              class="btn btn-primary register"
              (click)="register($event, ehrpatient)"
              [disabled]="crid || isLoading"
            >
              <img id="spinner" *ngIf="isLoading" src="assets/spinner.gif" />
              Associate Crid
            </button>
          </ng-template>
        </div>
      </div>

      <div class="patient_details">
        <ul class="list-unstyled">
          <li>Date of birth: {{ ehrpatient.birthDate }}</li>
          <li>Gender: {{ ehrpatient.gender }}</li>
          <li>Identifiers:</li>
          <ul *ngFor="let identifier of ehrpatient.identifier">
            <div *ngIf="identifier.system !== 'urn:oid:2.16.840.1.113883.4.1'">
              <li>{{ identifier.type?.text }}:{{ identifier.value }}</li>
            </div>
          </ul>
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-12" *ngIf="cridCallComplete == true && crid">
        <div *ngIf="crid">
          <button
            type="button"
            class="btn btn-primary register_proceed pull-right"
            (click)="proceed()"
          >
            Proceed
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
